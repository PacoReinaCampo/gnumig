2006-11-29  Thomas Schwinge  <tschwinge@gnu.org>

	* build-aux/config.guess: New file, thanks to `autoreconf'.
	* build-aux/config.sub: Likewise.
	* build-aux/depcomp: Likewise.
	* build-aux/install-sh: Likewise.
	* build-aux/missing: Likewise.
	* build-aux/ylwrap: Likewise.
	* INSTALL: File updated by `autoreconf'.
	* aclocal.m4: Likewise.
	* Makefile.in: Likewise.
	* configure: Likewise.

	* mig.in: Adopt to the Autoconf update.

	* configure.in: Move to...
	* configure.ac: ... here and overhaul a bit.

	* Makefile.am (TARGET_CPPFLAGS, TARGET_CFLAGS): New variables.

	* config.guess: Remove file.
	* config.sub: Likewise.
	* depcomp: Likewise.
	* install-sh: Likewise.
	* missing: Likewise.
	* mkinstalldirs: : Likewise.

	[bug #17122 --- ``GNU MIG debian dir'']
	* Makefile.am (debian_files): Remove variable.
	(EXTRA_DIST): Remove files from `debian/'.
	* debian/README.Debian: Remove file.
	* debian/changelog: Likewise.
	* debian/control: Likewise.
	* debian/copyright: Likewise.
	* debian/rules: Likewise.

2006-07-29  Ognyan Kulev  <ogi@fmi.uni-sofia.bg>

	[patch #324]
	* migcom.c (myfclose): New function.
	(main): Use myfclose instead of fclose.
	* user.c (WriteUserIndividual): Check for errors when closing file.

2006-01-26  Thomas Schwinge  <tschwinge@gnu.org>

	* config.guess: Updated from the canonical source.
	* config.sub: Likewise.

2005-05-27  Thomas Schwinge  <schwinge@nic-nac-project.de>

	[patch #2507]
	* mig.in (prj_quote_sh): New shell funcion; copied from Paul Jarc's
	prjlibs.  Use that function to properly quote strings in $cppflags
	that contain whitespace.

2005-04-09  Thomas Schwinge  <schwinge@nic-nac-project.de>

	* mig.in: Handle the preprocessor option '-isystem ...' correctly.

2004-03-18  Roland McGrath  <roland@frob.com>

	* utils.c (do_skip_vfprintf): New macro.
	(WriteCopyType, WritePackMsgType): Use that, so we do va_start and
	va_end independently around each SkipVFPrintf call.

2004-02-10  Roland McGrath  <roland@frob.com>

	* user.c (WriteTypeCheck): Use BAD_TYPECHECK macro instead of type-pun.
	* server.c (WriteTypeCheck): Likewise.
	* utils.c (WriteBogusDefines): Write a #define for that macro.
	* utils.c (WriteCheckDecl): Write auto const, not static const.
	(WriteStaticShortDecl, WriteStaticLongDecl): Likewise.

	* INSTALL, config.guess, config.sub, missing, mkinstalldirs,
	install-sh: Update files from autoconf/automake.

2004-02-01  Roland McGrath  <roland@frob.com>

	* depcomp, Makefile.in, aclocal.m4, configure: Update generated files.

2002-08-29  Jeff Bailey  <jbailey@gnu.org>

	* configure.in: Bump version to 1.3.1
	* configure: Regenerated.

	* NEWS: Updated for 1.3.1 release.

2002-07-31  Marcus Brinkmann  <marcus@gnu.org>

	* routine.c (rtFindSize): Always add sizeof_mach_msg_type_t to
	SIZE for args not in long form, irregardless of the itSize.

2002-05-07  Roland McGrath  <roland@frob.com>

	* type.c (itMakeNaturalType): New function.
	(init_type): Use that instead of itMakeIntType for itWaitTimeType and
	itMsgOptionType--give them each their special typedef names.
	* routine.c (rtCheckArgTypes): Use itCheckNaturalType for rtMsgOption.

2002-04-05  Roland McGrath  <roland@frob.com>

	* Makefile.am (cpu.symc): Depend on gensym.awk.
	* Makefile.in: Regenerated.

	* gensym.awk: Generate code with no unescaped newlines inside strings.

	* vprint.c: Fix obsolete #endif syntax.

2002-03-06  Roland McGrath  <roland@frob.com>

	* configure.in: Bump version to 1.3.
	* configure, Makefile.in, aclocal.m4: Regenerated.

2001-12-31  Roland McGrath  <roland@frob.com>

	* lexxer.l: Grok "retcode" IPC flag as a no-op, for compatibility
	with OSF Mach mig syntax.
	* lexxer.c: Regenerated.

2001-12-28  Roland McGrath  <roland@frob.com>

	* mig.in (default_cpp): Add -ansi to avoid -Di386=1 and the like.

	* mig.in (default_cpp): Put -undef here.
	(cppflags): Not here.

2001-10-03  Roland McGrath  <roland@frob.com>

	* mig.in (cppflags): Start with -undef.

2001-06-09  Marcus Brinkmann  <marcus@gnu.org>

	* Makefile.am (debian_files): New variable.
	(EXTRA_DIST): Add files in $(debian_files), prefixed with debian/.
	* configure, Makefile.in, aclocal.m4: Regenerated.

2001-06-08  Marcus Brinkmann  <marcus@gnu.org>

	* debian/rules: Fix directory permissions, set architecture relevant
	variables to default values, include section and priority in package,
	strip migcom down even further, as suggested by Lintian.
	* debian/changelog:  Bump version to 1.2-1.

2001-06-07  Roland McGrath  <roland@frob.com>

	* configure.in: Bump version to 1.2.
	* configure, Makefile.in: Regenerated.
	* NEWS: Updated for changes since 1.1 release.

	* header.c (WriteRoutineList): New function.
	* write.h: Declare it.
	* migcom.c (RoutineListFileName): New variable.
	(parseArgs): New option -list to set it.
	(main): If set, write the named output file with WriteRoutineList.
	* mig.in: Grok -list and put it in the usage message.

	* global.c (DefaultFiles): New variable, boolean initialized to true.
	(more_global): Leave null file name variables alone if it's false.
	* global.h (DefaultFiles): Declare it.
	* migcom.c (parseArgs): New option -n clears it.
	* mig.in: Grok -n (pass it through) and put it in the usage message.

	* statement.h: Fix obsolete #else/#endif syntax.
	* lexxer.l: Likewise.
	* lexxer.c: Regenerated.

2000-07-04  Marcus Brinkmann  <marcus@gnu.org>

	* debian: New directory for Debian packaging stuff.
	* debian/README.Debian: New file.
	* debian/changelog: Likewise.
	* debian/control: Likewise.
	* debian/rules: Likewise.
	* debian/copyright: Likewise.

1999-10-11  Roland McGrath  <roland@baalperazim.frob.com>

	* user.c (WriteIncludes): Fix missing newline in last change.
	* server.c (WriteIncludes): Likewise.

1999-10-08  Roland McGrath  <roland@baalperazim.frob.com>

	* server.c (WriteIncludes): Write:
		#ifndef _GNU_SOURCE
		#define _GNU_SOURCE 1
		#endif
	into the output before all else.  This is required for building
	stubs with GNU libc's built-in Mach/MiG support code.
	* user.c (WriteIncludes): Likewise.

1999-06-22  Thomas Bushnell, BSG  <tb@mit.edu>

	* configure.in: Bump version to 1.1.  First official net release.

	* configure, Makefile.in, aclocal.m4: Regenerated.

1999-05-23  Roland McGrath  <roland@baalperazim.frob.com>

	* configure.in: Bump version to 1.0.2.

	* mig.in: Grok --help.
	Suggested by Jeff Bailey <jbailey@nisa.net>.

1999-05-22  Roland McGrath  <roland@baalperazim.frob.com>

	* configure.in: Add AC_PROG_CPP.
	* mig.in (CC): Set this before default_cpp, which might use its value.
	Reported by Jeff Bailey <jbailey@nisa.net>.

1999-04-14  Roland McGrath  <roland@baalperazim.frob.com>

	* mig.in (default_cpp, default_cc): New variables, @ expansions here.
	(CC): Make sure it's defined, in case ${CPP} refers to ${CC}.
	(cpp): Use ${default_cpp} instead of the literal multiword contents.

1999-03-20  Roland McGrath  <roland@baalperazim.frob.com>

	* mig.in (PACKAGE, VERSION): New variables, substituted by configure.
	Grok --version.

1998-12-04  Roland McGrath  <roland@baalperazim.frob.com>

	Version 1.0.1 released.
	* configure.in: Update version to 1.0.1.

1998-09-06  Roland McGrath  <roland@baalperazim.frob.com>

	* mig.in (cpp): Add `-x c' to TARGET_CC command.

1998-07-19  Roland McGrath  <roland@baalperazim.frob.com>

	* README, AUTHORS, NEWS: New files.

1998-07-18  Roland McGrath  <roland@baalperazim.frob.com>

	* lexxer.c, parser.c: Regenerated in srcdir so #line refs are good.

	* migcom.c (main): Fix return type to int (not void), and use return.

	Moved mig out of gnumach into standalone distribution with
	vanilla autoconf/automake build arrangement.
	* configure.in, Makefile.am: New files.
	* mig.sh: Renamed to mig.in.
	* mig.in (prefix, exec_prefix, libexecdir): New vars set by configure.
	(migcom): Find migcom in ${libexecdir}, and use @MIGCOM@ for its name.
	(cpp): Use @TARGET_CC@ -E instead of @CPP@.

	* gensym.awk: New file, copied from gnumach top-level dir.

Thu Mar 20 14:56:34 1997  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* error.c (unix_error_string): Assume HAVE_STRERROR.

Wed May 15 13:55:01 1996  Miles Bader  <miles@gnu.ai.mit.edu>

	* user.c (WriteRequestArgs): Don't check args against akbUserArg.
	(WritePackArg): Do check poly args also against akbUserArg.

Thu May  2 19:13:32 1996  Miles Bader  <miles@gnu.ai.mit.edu>

	* routine.h (struct routine): Split rtReplyPort field into
	rtUReplyPort and rtSReplyPort fields.
	* routine.c (rtAddDummyReplyPort): Add USER arg, and use it.
	(rtCheckRoutineArg): Set user or server or both reply ports.
	(rtSetArgDefaults, rtCheckArgTypes, rtCheckRoutine): Deal with
	split reply ports.
	* user.c (WriteRequestHead, WriteMsgCheckReceive): Use
	rtUReplyPort field instead of rtReplyPort.
	(WriteRequestArgs): Only deal with user-side args.

Wed May 15 13:55:01 1996  Miles Bader  <miles@gnu.ai.mit.edu>

	* user.c (WriteRequestArgs): Don't check args against akbUserArg.
	(WritePackArg): Do check poly args also against akbUserArg.

Thu May  2 19:13:32 1996  Miles Bader  <miles@gnu.ai.mit.edu>

	* routine.h (struct routine): Split rtReplyPort field into
	rtUReplyPort and rtSReplyPort fields.
	* routine.c (rtAddDummyReplyPort): Add USER arg, and use it.
	(rtCheckRoutineArg): Set user or server or both reply ports.
	(rtSetArgDefaults, rtCheckArgTypes, rtCheckRoutine): Deal with
	split reply ports.
	* user.c (WriteRequestHead, WriteMsgCheckReceive): Use
	rtUReplyPort field instead of rtReplyPort.
	(WriteRequestArgs): Only deal with user-side args.

Thu Feb 29 12:46:40 1996  steve clawson  <sclawson@marker.cs.utah.edu>

	* user.c (WriteMsgCheckReceive): If the reply-port isn't
	user-supplied and there was a message transmission error, then
	deallocate it.  From Michael I Bushnell (mib@gnu.ai.mit.edu).

	* user.c (WriteMsgCheckIdentity): Dealloc reply port if a
 	mismatched reply comes in to avoid cascaded errors.  From
	Michael I Bushnell (mib@gnu.ai.mit.edu).

Wed May  3 13:59:54 MDT 1995  Bryan Ford <baford@cs.utah.edu>

	Merged in diffs from UK02p12 to UK02p15:

	Wed May  3 10:47:41 MDT 1995  Bryan Ford <baford@cs.utah.edu>

		* Released UK02p15.

		* mig_string.h: include string.h instead of strings.h

		* user.c, lexxer.l: changed index/rindex to strchr/strrchr.

Fri Feb 10 13:25:54 MST 1995  Bryan Ford <baford@cs.utah.edu>

	Merged in diffs from UK02p7 to UK02p9:

	Sun, 29 Jan 1995  Remy.Card@masi.ibp.fr (Remy CARD)

		Fixed a bug that causes mig to generate bad file names
		in #include directives when generating the user source file.

Fri Nov 25 13:56:32 MST 1994  Bryan Ford  (baford@cs.utah.edu)

	Merged in diffs from UK02p6 to UK02p7:

	* MIG now compiles under BSD without 'vm_???_t' types
	  conflicting between host (BSD) and target (Mach)
	  header files.  Basically, the MIG source files compiled
	  to run on the host machine no longer include mach/message.h;
	  instead they get the needed defines through cpu.h
	  which is built by compiling cpu.sym for the target machine.

Mon Aug 29 18:31:21 1994  Bryan Ford  (baford@cs.utah.edu)

	* got rid of /usr/bin pathname in call to basename:
	basename isn't always in /usr/bin.

Fri Aug 26 11:36:10 1994  Louis-D. Dubeau  (hallu@info.polymtl.ca)

	* Fixed mig.sh to pass -imacros flags to CPP correctly.

Tue Sep  6 10:00:29 1994  Roland McGrath (roland@churchy.gnu.ai.mit.edu)

	* Released UK02p6.

	* use strerror instead of sys_errlist if it's available.

	* Other minor portability fixes.

Mon Aug 15 18:37:47 1994  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* global.c (more_global): Prepend RoutinePrefix to ServerDemux
	even for non-default value of ServerDemux.

Fri Jul  8 14:36:53 1994  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* routine.h (rtSkip): Take int arg.
	* routine.c (rtSkip): Take int arg and increment by that many.
	* parser.y (Statement): Grok `skip N;'; pass int arg to rtSkip.

Fri May 13 15:08:56 1994  Michael I Bushnell  (mib@churchy.gnu.ai.mit.edu)

	* user.c (WriteMsgCheckReceive): Deallocate the reply port also if
	we get one of the send errors that can cause the message to be
	partially sent and then destroyed; otherwise we might later get a
	spurious send-once notification.

Wed Aug  4 10:34:42 1993  Michael I. Bushnell  (mib at ernst.gnu.ai.mit.edu)

	* Makefile: Don't use flex or bison; use lex and yacc instead.

	* migcom.c (myfopen): Added extern declaration of errno.

Wed Jun 30 19:46:51 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* user.c (WriteUser): Call WriteImport for skImport and skUImport
	statements.
	(WriteUserIndividual): Write all the import and uimport statements
	to each file.

Mon Jun 28 22:07:14 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* utils.c (WriteStaticShortDecl, WriteCheckDecl,
	WriteStaticLongDecl): Generate a `const' definition.

Fri Jun 25 17:53:26 1993  Roland McGrath  (roland@churchy.gnu.ai.mit.edu)

	* utils.c (WriteCopyType): Write SubrPrefix before `mig_strncpy'.

	* user.c (WriteRequestHead): Write SubrPrefix before
	`mig_get_reply_port'.
	(WriteMsgCheckReceive): Write SubrPrefix before
	`mig_dealloc_reply_port'.
	(WritePackArgValue): Write SubrPrefix before `mig_strncpy'.
	(WriteExtractArgValue): Likewise.
	(WriteExtractArgValue): Write SubrPrefix before `mig_allocate'.
	(WriteMsgSend): Write SubrPrefix before `mach_msg_send_from_kernel'
	and `mach_msg'.
	(WriteMsgSendReceive): Write SubrPrefix before `mach_msg'.
	(WriteMsgRPC): Write SubrPrefix before `mach_msg_rpc_from_kernel'
	and `mach_msg'.

	* server.c (WriteDestroyArg): Write SubrPrefix before `mig_deallocate'.
	(WritePackArgValue): Write SubrPrefix before `mig_strncpy'.
	(WriteDestroyPortArg): Write SubrPrefix before `ipc_port_release_send'.
	(WriteAdjustMsgCircular): Write SubrPrefix before
	`ipc_port_check_circularity'.

	* routine.c (rtCheckRoutine): Prepend RoutinePrefix to
	RT->rtServerName and RT->rtUserName.

	* migcom.c (parseArgs): Recognize -subrprefix and -prefix.

	* global.c (SubrPrefix, RoutinePrefix): Define new variables.
	* global.h: Declare them.
